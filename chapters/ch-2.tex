\chapter{Sensor Networks Background} 
\label{cha:Sensor Networks/Data Aggregation/Security Background}
	Sensor networks are becoming ubiquitous in our day to day life. 
	They are known also known as Internet of Things.
	In the following sections we show the applications and the rise of sensor networks.
	Then we describe why doing security in the sensor network presents the number of unique challenges and solutions to tackle those challenges.

\section{Sensor Networks and Applications}
	In sensor networks, thousands of sensor nodes may interact with the physical environment and collectively monitor an area, generating a large amount of data to be transmitted and reasoned about.
	With the recent advances in sensor network research, we can use tiny and cheap sensor nodes to obtain a lot of useful information about physical environment.
	For example, we can use them to discover temperature, humidity, water quality, lightning condition, pressure, noise level, carbon dioxide level, oxygen level, soil moisture, magnetic field, characteristics of objects such as speed, direction, and size, the presence or absence of certain kinds of objects, and all kinds of values about machinery like mechanical stress level or movement \cite{hof2007applications}.
	These versatile types of sensors, allow us to use sensor network in a wide variety of scenarios.
	For example, sensor networks are used in habitat and environment monitoring, health care, military surveillance, industrial machinery surveillance, home automation, scientific data collection, emergency fire alarm systems, traffic monitoring, wildfire tracking, wildlife monitoring and many other applications.\\
	\textbf{Military Application}
	Sensor networks can be used for enemy tracking, battlefield surveillance or target classification \cite{li2002detection}.
	For example, \textit{Palo Alto Research Center} tries to spot ``interesting'' vehicles (the vehicles marked specially) using motes equipped with microphones or steerable cameras \cite{chu2004distributed}.
	The objective is to coordinate a number of this kind of sensors in order to keep sensing the track of a chosen moving object minimizing any information gaps about the track that may occur.\\
	\textbf{Environmental Monitoring} 
	For example, \textit{Meteorology and Hydrology in Yosemite National Park} \cite{lundquist2003meteorology}, a sensor network was deployed to monitor the water system across and within the Sierra Nevada, especially regarding natural climate fluctuation, global warming, and the growing needs of water consumers.
	Research of the water system in the Sierra Nevada is difficult, because of its geographical structure.
	And sensor networks can be real blessing in such situation as they can operate with little or no human intervention.\\
	\textbf{Health Care} 
	Sensors can be used to monitor the patients round the clock. The most important criteria for the such networks are security and reliability.
	\textit{CodeBlue} \cite{lorincz2004sensor} is a system to enhance emergency medical care with the goal to have a seamless patient transfer between a disaster area and a hospital.\\
	\textbf{Sustainable Mobility} 
	With the driver less cars from companies like Google, connected and coordinated vehicles seems the future of transportation.
	Autonomous vehicle systems \cite{benenson2008towards} describes how various various technologies in addition to the sensor networks is used in making sustainable mobility. 

	% Therefore, the sensor network was designed to operate with little or no human interaction.
	The application of a sensor network usually determines the design of the sensor nodes and the design of the network itself.
	As far as we know, there is no general architecture for sensor networks.
	Therefore, developing a protocol for sensor networks can certainly be challenging. 

\section{Energy Consumption}
	The sensor network's lifetime can be maximized by minimizing the power consumption of the sensor node's radio module.
	To estimate the power consumption, we have to consider the communication and computation power consumption at each sensor node.
	The radio module energy dissipation depends on two main parameters \cite{wang2002energy}.
	The first is $E_{elec} (J/b)$, the energy dissipated to run the transmit or receive electronics.
	The second is $\varepsilon_{amp} (J/b \cdot m^2)$, the energy dissipated by the transmit power amplifier to achieve an acceptable noise ratio $E_{b} / N_{o} $ at the receiver.
	We assume the $d^2$ energy loss for transmission between sensor nodes since the distances between sensors are relatively short \cite{ettus1998system}. 
	To transmit a $k$ - bit packet at distance $d$, the energy dissipated is:
	\begin{equation}
		E_{tx}(k, d) = E_{elec} \cdot k + \varepsilon_{amp} \cdot k \cdot d^{2}
	\end{equation}
	and to receive the k - bit packet, the radio expends
	\begin{equation}
		E_{rx}(k) = E_{elec} \cdot k
	\end{equation}
	For $\mu Amp$\ wireless sensor, $E_{elec} = 50nJ/b$\ and $\varepsilon_{amp} = 100pJ/b \cdot m^2$.

 	To sustain the sensor network for longer time all aspects of the sensor network should be efficient.
	For example, the networking algorithm for routing should be such that it minimizes the distance $d$\ between the nodes.
	The signal processing algorithm should be such that it process the networking packets with less computations.
	It is shown in \cite{wang2002energy} that by distributing the Fast Fourier Transform (FFT) algorithm in the network requires less communication between the sensor nodes.
	Also, for minimal energy dissipation, a processor should operate at the lowest voltage for a given clock frequency.

\section{Data Aggregation}
	The sensor nodes in the network often have limited resources, such as computation power, memory, storage, communication capacity and most significantly, battery power.
	Furthermore, data communications between nodes consume a large portion of the total energy consumption. 
	The in-network data aggregation reduces the energy consumption by aggregating the data before sending it to the parent node in the network which reduces the communications between nodes.
	For example, in-network data aggregation of the $\textit{SUM}$ function can be performed as follows. 
	Each intermediate sensor node in the network forwards a single sensor reading containing the sum of all the sensor readings from all of its descendants, rather than forwarding each descendants' sensor reading one at a time to the base station.
	It is shown that the energy savings achieved by in-network data aggregation are significant \cite{madden2002tag}.
	The in-network data aggregation approach requires the sensor nodes to do more computations.
	But studies have shown that transmitting the data requires more energy than computing the data. 
	Hence, in-network data aggregation is an efficient and a widely used approach for saving bandwidth by doing less communications between sensor nodes and ultimately giving longer battery life to sensor nodes in the network.

	We define the following terms to help us define the goals of in-network data aggregation approach.
	\begin{definition}\label{def:payload}\cite{PayloadWiKi}
		\textbf{Payload} is the part of the transmitted data which is the fundamental purpose of the transmission, to the exclusion of information sent with it such as meta data solely to facilitate the delivery.
	\end{definition}
	\begin{definition}\label{def:information-rate}
		\textbf{Information rate} for a given node is the ratio of the \payloads, number of \payloads\ sent divided by the number of \payloads\ received.
	\end{definition}
	The goal of the aggregation process is to achieve the lowest possible information-rate.
	In the following sections, we show that lowering information-rate makes the intermediate sensor nodes (aggregator) more powerful.
	Also, it makes aggregated \payload\ more fragile and vulnerable to various security attacks.
	% Now, we describe bandwidth analysis of different in-network data aggregation approaches.


\section{Bandwidth Analysis}
	Congestion is a widely used parameter while doing bandwidth analysis of networking applications.
	% Picture
	% Definitions vs Equations errors 
	The congestion for any given node is defined as follows:
	\begin{equation}\label{def:congestion}
		Node\ congestion = Edge\ congestion \cdot Fanout
	\end{equation}
	Congestion is a useful factor while analyzing sensor network as it measures how quickly the sensor nodes will exhaust their batteries \cite{madden2003design}. 
	Some nodes in the sensor network have more congestion than the others, the highly congested nodes are the most important to the the network connectivity.
	For example, the nodes closer to the base station are essential for the network connectivity.
	The failure of the highly congested nodes may cause the sensor network to fail even though most of the nodes in the network are alive.
	Hence, it is desirable to have a lower congestion on the highly congested nodes even though it costs more congestion within the overall sensor network.\\
	To distribute the congestion uniformly across the network, we can construct an aggregation protocol where each node transmits a single payload Defined in \ref{def:payload} to its parent in the aggregation tree.
	% Picture
	% Definitions vs Equations errorsis $\Omega(1)$ congestion on each edge in the aggregation tree, thus resulting in $\Omega(\delta)$ congestion on the node  according to Definition \ref{def:congestion}, where $\delta$ is the fanout of the node.
	In this approach, $\delta$ is dependent on the given aggregation tree.
	For example, an aggregation tree shown in Figure \ref{fig:star-network}, 
	\begin{figure}[h!]
		\centering
		\includegraphics[scale = 1]{images/star-tree.png}\\
		\caption{Star Network}
		\label{fig:star-network}
	\end{figure}
	with $n$\ nodes, organized in the star tree topology congestion is $O(n)$.
	And the network organized in the palm tree topology as shown in Figure \ref{fig:palm-tree-network}
	\begin{figure}[h!]
		\centering
		\includegraphics[scale = 1]{images/palm-tree.png}\\
		\caption{Palm Tree Network}
		\label{fig:palm-tree-network}
	\end{figure}
	the congestion is $O(1)$.
	This approach can create some highly congested nodes in the aggregation tree which is undesirable.
	In most of the real world applications we cannot control $\delta$ as the aggregation tree is random.
	Hence, it is desirable to have uniform distribution of congestion across the aggregation tree.

	% Talk about No aggregation approach.

	% \textit{SHIA} tries to achieve uniform congestion in the network.	

\section{Security in Sensor Networks}
	\label{sec:aggregate-adversary}
	Here, we depict, what parameters should be taken into account while designing secure protocol for sensor networks.  
	And how those parameters constrains protocol designer's choices of the protocol.
	Then we depict how data-aggregation can help overcome some of those limitation and some examples where security is ignored by making some strong network assumptions.

	\subsection{Physical Limitations}
	Sensor nodes are often deployed in open, hostile and unattended environments, so they are vulnerable to physical tampering due to the lower physical security.
	An adversary can obtain the confidential information from a compromised sensor and reprogram it with malicious software.
	The compromised node may then report an arbitrary false sensor readings to its parent node in the tree hierarchy, causing the final aggregation result to far deviate from the true aggregate result.
	This attack becomes more damaging when multiple adversaries succeeds in injecting false data into the network which may cause catastrophic consequences \cite{wagner2007algorithms}.	

	\subsection{Hardware Limitations}
		As far as we know, one of the first hardware platform for developing sensor network application is MICA \cite{hill2002mica} developed by University of Berkeley.
		Another popular platform is Mote from Intel \cite{arazi2006self}.
		Due to lower manufacturing cost of sensor nodes, they have low speed processor, limited storage, a short range trans receiver.
		For example, the major specifications for the latest ZigBee chip supporting IEEE 802.15.4 standard, CC2538 from TexasInstruments are shown in Table \ref{table:soc}.
		This chip can do most of the security algorithms but has really little amount of memory storage. It has limited output power which constraints its transmission range which forces us to use multi-hop routing in the network as one node can not communicate with the node outside of its transmission range.
		This hardware limitations constrains protocol designer's choice of algorithms for applications.  
	\begin{table}[!htb]	
		\begin{center}
			\begin{tabular}{ |l| l| }
				\hline
			     & CC2538 \\
			    \hline
			    Device Type & Wireless Micro controller \\
			    Frequency & 2.4GHz \\
			    Processor Integration & ARM Cortex-M3 \\
					Flash & Up to 512 KB \\
					RAM & Up to 32 KB \\
					Security & AES-128/256;ECC-128/256; SHA2; RSA \\
					RX Current & 20 (mA) \\
					Output Power & 7 (dBm) \\
					Data Rate(Max) & 250 kbps \\
					Type of Battery & AAA; AA; Rechargable(Li-ION) \\
			    \hline
			\end{tabular}
		\end{center}
		 \caption{System-on-Chip specifications for IEEE 802.15.4 from TexasInstruments}
		 \label{table:soc}
	\end{table}
	
	\subsection{Transmission Medium}
		In sensor networks, a group of sensor nodes ( or processors ) communicate over the radio (e.g., Bluetooth, WLAN).
		Traditionally, wireless medium has the issues of in synchronization, hidden station and expose station terminal problems, distributed arbitration, directional antennas, bandwidth limitations, higher error rate, security, scalability etcetera.
		For example, wireless network has approximately $10^6$ times higher bit error rate (BER) than wired network which causes frequent link loss and then path loss. 
		Hence, making unstable routing in the network.
		Higher BER creates higher collision rate in the network, generating higher overhead of retransmission and lowering the channel utilization and the throughput of the network.
		This kind of transmission medium with constrained resources makes it challenging to design the secure data-aggregation protocol for sensor networks.

	\subsection{Mobility}
		As we know, sensor nodes communicate via radio and the availability of the transmission medium changes over time due to link failure, bandwidth limitations or change in network topology.
		Nodes may be able to move, which further contributes to the instability of the communication link.
		The mobility issue makes difficult to do the routing in the network with the directional antennas in place.
		It also requires network to be agile enough to do the reconfiguration for the newer network topology.
		It impedes whiled doing the quality of service in the network. 
		All these parameters combined contributes to making strong assumptions on the network topology while designing the secure data aggregation protocol for sensor networks.

		\subsection{In-network Data Aggregation}
		% Most of them assume that the other nodes are trustable and thus do not consider the security and attack issues.
		Designing secure data aggregation protocol for the wireless sensor network poses a numerous challenges due to resource limitations and inherent characteristics discussed in the previous subsections. 
		One widely used approach to overcome the bandwidth limitation is to use in-network data aggregation.
		In-network data aggregation approach saves bandwidth by transmitting less \payloads\  between sensor nodes.
		But that empowers an intermediate aggregate sensor nodes in the network by allowing it to control certain part of the network.
		For example, a malicious intermediate sensor node who does aggregation over all of its descendants \payloads, needs to tamper with only one aggregated \payload\ instead of tampering with all the \payloads\ received from its descendants. 
		Thus, a malicious intermediate sensor node needs to do less work to skew the final aggregated \payload.
		An adversary controlling few sensor nodes in the network can cause the network to return unpredictable \payloads, making an entire sensor network unreliable.
		Notice that the more descendants an intermediate sensor node has the more powerful it becomes.
		
		Despite the fact that in-network aggregation makes an intermediate sensor nodes more powerful, some aggregation approaches requires strong network topology assumptions or honest behaviors from the sensor nodes.
		For example, in-network aggregation schemes in \cite{yao2002cougar, madden2003design} assumes that all the sensor nodes in the network are honest. Secure Information Aggregation (SIA) of \cite{przydatek2003sia}, provides security for the network topology with a single-aggregator model.  
		Secure hierarchical in-network aggregation (SHIA) in sensor networks \cite{chan2006secure} presents the first and provably secure sensor network data aggregation protocol for general networks and multiple adversaries. 
		We discuss the details of the protocol in the next chapter. 
		SHIA limits the adversary's ability to tamper with the aggregation result with the tightest bound possible but it does not help detecting an adversary in the network.
		Also, we claim that same upper bound can be achieved with compact label format defined in the next chapter.
